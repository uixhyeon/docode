<template>
  <div class="gukjungpark-page">
    <nav class="sticky-nav" :class="{ hidden: !showNav }">
      <div class="nav-content">
        <button
          v-for="section in sections"
          :key="section.id"
          @click="scrollToSection(section.id)"
          :class="{ active: activeSection === section.id }"
          class="nav-item"
        >
          {{ section.title }}
        </button>
      </div>
    </nav>

    <div class="page-content">
      <section id="overview" class="content-section">
        <h1 class="main-title">ğŸ­ êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€ ë¦¬ë‰´ì–¼</h1>
        <p class="subtitle">ë¬¸í™”ìœ ì‚°ì„ í˜„ëŒ€ì ìœ¼ë¡œ ì¬í•´ì„í•œ ì›¹ì‚¬ì´íŠ¸ ë¦¬ë‰´ì–¼ í”„ë¡œì íŠ¸</p>

        <div class="info-card">
          <h2>í”„ë¡œì íŠ¸ ì†Œê°œ</h2>
          <p>
            êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€ì˜ ì›¹ì‚¬ì´íŠ¸ë¥¼ í˜„ëŒ€ì ì¸ ë””ìì¸ê³¼ í–¥ìƒëœ ì‚¬ìš©ì ê²½í—˜ìœ¼ë¡œ ë¦¬ë‰´ì–¼í•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.
            ë¬¸í™”ìœ ì‚°ì˜ ê°€ì¹˜ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì „ë‹¬í•˜ë©´ì„œë„ ì§ê´€ì ì´ê³  ì•„ë¦„ë‹¤ìš´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ëª©í‘œë¡œ í–ˆìŠµë‹ˆë‹¤.
          </p>
        </div>

        <div class="links-grid">
          <a href="#" target="_blank" class="link-card">
            <div class="link-icon">ğŸŒ</div>
            <div class="link-title">ë¦¬ë‰´ì–¼ ì‚¬ì´íŠ¸</div>
            <div class="link-url">ì¤€ë¹„ì¤‘</div>
          </a>
          <a href="https://www.museum.go.kr" target="_blank" class="link-card">
            <div class="link-icon">ğŸ›ï¸</div>
            <div class="link-title">ì›ë³¸ ì‚¬ì´íŠ¸</div>
            <div class="link-url">museum.go.kr</div>
          </a>
        </div>
      </section>

      <section id="design" class="content-section">
        <h2>ğŸ¨ ë””ìì¸ ê°œì„  ì‚¬í•­</h2>

        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">ğŸ“±</div>
            <h3>ëª¨ë°”ì¼ ìµœì í™”</h3>
            <p>ëª¨ë°”ì¼ í¼ìŠ¤íŠ¸ ë””ìì¸ìœ¼ë¡œ ëª¨ë“  ë””ë°”ì´ìŠ¤ì—ì„œ ìµœì ì˜ ê²½í—˜ ì œê³µ</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon">ğŸ–¼ï¸</div>
            <h3>ë¹„ì£¼ì–¼ ì¤‘ì‹¬</h3>
            <p>ê³ í™”ì§ˆ ìœ ë¬¼ ì´ë¯¸ì§€ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í•œ ì‹œê°ì  ìŠ¤í† ë¦¬í…”ë§</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon">ğŸ¯</div>
            <h3>ì§ê´€ì  ë„¤ë¹„ê²Œì´ì…˜</h3>
            <p>ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ì •ë³´ë¥¼ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆëŠ” êµ¬ì¡°</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon">â™¿</div>
            <h3>ì ‘ê·¼ì„± í–¥ìƒ</h3>
            <p>WCAG 2.1 AA ìˆ˜ì¤€ì˜ ì›¹ ì ‘ê·¼ì„± ì¤€ìˆ˜</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon">ğŸ­</div>
            <h3>ë¬¸í™”ì  ê°ì„±</h3>
            <p>í•œêµ­ ì „í†µ ìƒ‰ìƒê³¼ íŒ¨í„´ì„ í˜„ëŒ€ì ìœ¼ë¡œ ì¬í•´ì„</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon">âš¡</div>
            <h3>ì„±ëŠ¥ ìµœì í™”</h3>
            <p>ì´ë¯¸ì§€ ìµœì í™”ì™€ ë ˆì´ì§€ ë¡œë”©ìœ¼ë¡œ ë¹ ë¥¸ ë¡œë”© ì†ë„</p>
          </div>
        </div>
      </section>

      <section id="features" class="content-section">
        <h2>âœ¨ ì£¼ìš” ê¸°ëŠ¥</h2>

        <div class="timeline">
          <div class="timeline-item">
            <div class="timeline-marker">1</div>
            <div class="timeline-content">
              <h3>ê°€ìƒ ì „ì‹œ íˆ¬ì–´</h3>
              <p>360ë„ íŒŒë…¸ë¼ë§ˆ ë·°ë¡œ ì „ì‹œê´€ì„ ì˜¨ë¼ì¸ì—ì„œ ì²´í—˜</p>
              <ul>
                <li>ì¸í„°ë™í‹°ë¸Œ 3D ë·°ì–´</li>
                <li>ìœ ë¬¼ ìƒì„¸ ì •ë³´ íŒì—…</li>
                <li>ìŒì„± ê°€ì´ë“œ ì§€ì›</li>
              </ul>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-marker">2</div>
            <div class="timeline-content">
              <h3>ì „ì‹œÂ·í–‰ì‚¬ ì •ë³´</h3>
              <p>í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ì „ì‹œì™€ ì˜ˆì •ëœ í–‰ì‚¬ ì•ˆë‚´</p>
              <ul>
                <li>ë‹¬ë ¥ ê¸°ë°˜ ì¼ì • í™•ì¸</li>
                <li>ì¹´í…Œê³ ë¦¬ë³„ í•„í„°ë§</li>
                <li>ì˜ˆì•½ ë° ì•Œë¦¼ ê¸°ëŠ¥</li>
              </ul>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-marker">3</div>
            <div class="timeline-content">
              <h3>ìœ ë¬¼ ê²€ìƒ‰</h3>
              <p>ì†Œì¥í’ˆ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í†µí•œ ìœ ë¬¼ ê²€ìƒ‰</p>
              <ul>
                <li>ê³ ê¸‰ ê²€ìƒ‰ í•„í„°</li>
                <li>ì‹œëŒ€ë³„, ë¶„ë¥˜ë³„ íƒìƒ‰</li>
                <li>ê³ í•´ìƒë„ ì´ë¯¸ì§€ ë·°ì–´</li>
              </ul>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-marker">4</div>
            <div class="timeline-content">
              <h3>êµìœ¡ í”„ë¡œê·¸ë¨</h3>
              <p>ì–´ë¦°ì´, ì²­ì†Œë…„, ì„±ì¸ì„ ìœ„í•œ êµìœ¡ ì½˜í…ì¸ </p>
              <ul>
                <li>ì˜¨ë¼ì¸ êµìœ¡ ìë£Œ</li>
                <li>êµìœ¡ í”„ë¡œê·¸ë¨ ì‹ ì²­</li>
                <li>í•™ìŠµ ì»¤ë®¤ë‹ˆí‹°</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section id="tech" class="content-section">
        <h2>ğŸ›  ê¸°ìˆ  ìŠ¤íƒ ë° êµ¬í˜„</h2>

        <div class="tech-grid">
          <div class="tech-category">
            <h3>Frontend</h3>
            <ul>
              <li><strong>Vue.js 3</strong> - SPA í”„ë ˆì„ì›Œí¬</li>
              <li><strong>SCSS</strong> - ìŠ¤íƒ€ì¼ë§</li>
              <li><strong>GSAP</strong> - ì• ë‹ˆë©”ì´ì…˜</li>
            </ul>
          </div>

          <div class="tech-category">
            <h3>UI/UX</h3>
            <ul>
              <li><strong>Figma</strong> - ë””ìì¸ ì‹œìŠ¤í…œ</li>
              <li><strong>Adobe XD</strong> - í”„ë¡œí† íƒ€ì´í•‘</li>
              <li><strong>ColorZilla</strong> - ìƒ‰ìƒ ì¶”ì¶œ</li>
            </ul>
          </div>

          <div class="tech-category">
            <h3>Optimization</h3>
            <ul>
              <li><strong>Lighthouse</strong> - ì„±ëŠ¥ ì¸¡ì •</li>
              <li><strong>WebP</strong> - ì´ë¯¸ì§€ ìµœì í™”</li>
              <li><strong>Lazy Loading</strong> - ì§€ì—° ë¡œë”©</li>
            </ul>
          </div>
        </div>

        <div class="code-explanation">
          <h3>ì´ë¯¸ì§€ ë ˆì´ì§€ ë¡œë”© êµ¬í˜„</h3>
          <div class="code-block">
            <pre><code>const imageObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const img = entry.target;
      img.src = img.dataset.src;
      img.classList.add('loaded');
      imageObserver.unobserve(img);
    }
  });
});

document.querySelectorAll('img[data-src]').forEach(img => {
  imageObserver.observe(img);
});</code></pre>
          </div>
        </div>
      </section>

      <section id="improvements" class="content-section">
        <h2>ğŸ“Š ê°œì„  ê²°ê³¼</h2>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-number">85â†’98</div>
            <div class="stat-label">Lighthouse ì„±ëŠ¥ ì ìˆ˜</div>
          </div>

          <div class="stat-card">
            <div class="stat-number">40%</div>
            <div class="stat-label">í˜ì´ì§€ ë¡œë”© ì†ë„ ê°œì„ </div>
          </div>

          <div class="stat-card">
            <div class="stat-number">60%</div>
            <div class="stat-label">ëª¨ë°”ì¼ íŠ¸ë˜í”½ ì¦ê°€</div>
          </div>

          <div class="stat-card">
            <div class="stat-number">AA</div>
            <div class="stat-label">ì›¹ ì ‘ê·¼ì„± ë“±ê¸‰</div>
          </div>
        </div>
      </section>

      <section id="learnings" class="content-section">
        <h2>ğŸ’¡ ë°°ìš´ ì </h2>

        <div class="insights-list">
          <div class="insight-item">
            <div class="insight-icon">ğŸ¨</div>
            <div class="insight-content">
              <h3>ë¬¸í™”ì  ë§¥ë½ì˜ ì¤‘ìš”ì„±</h3>
              <p>ì „í†µê³¼ í˜„ëŒ€ì˜ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” ë””ìì¸ì˜ ì¤‘ìš”ì„±ì„ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤.</p>
            </div>
          </div>

          <div class="insight-item">
            <div class="insight-icon">â™¿</div>
            <div class="insight-content">
              <h3>ì ‘ê·¼ì„± ìš°ì„  ì„¤ê³„</h3>
              <p>ëª¨ë“  ì‚¬ìš©ìë¥¼ ê³ ë ¤í•œ í¬ìš©ì  ë””ìì¸ì˜ í•„ìš”ì„±ì„ ë°°ì› ìŠµë‹ˆë‹¤.</p>
            </div>
          </div>

          <div class="insight-item">
            <div class="insight-icon">ğŸ“±</div>
            <div class="insight-content">
              <h3>ëª¨ë°”ì¼ í¼ìŠ¤íŠ¸</h3>
              <p>ëª¨ë°”ì¼ ìš°ì„  ì„¤ê³„ê°€ ì „ì²´ ì‚¬ìš©ì ê²½í—˜ í–¥ìƒìœ¼ë¡œ ì´ì–´ì§ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue'

const sections = [
  { id: 'overview', title: 'ê°œìš”' },
  { id: 'design', title: 'ë””ìì¸ ê°œì„ ' },
  { id: 'features', title: 'ì£¼ìš” ê¸°ëŠ¥' },
  { id: 'tech', title: 'ê¸°ìˆ  ìŠ¤íƒ' },
  { id: 'improvements', title: 'ê°œì„  ê²°ê³¼' },
  { id: 'learnings', title: 'ë°°ìš´ ì ' }
]

const showNav = ref(true)
const activeSection = ref('overview')
let lastScrollY = 0
let ticking = false

const handleScroll = () => {
  const currentScrollY = window.scrollY
  if (currentScrollY > lastScrollY && currentScrollY > 100) {
    showNav.value = false
  } else {
    showNav.value = true
  }
  lastScrollY = currentScrollY
  updateActiveSection()
}

const onScroll = () => {
  if (!ticking) {
    window.requestAnimationFrame(() => {
      handleScroll()
      ticking = false
    })
    ticking = true
  }
}

const updateActiveSection = () => {
  const scrollPosition = window.scrollY + 150
  for (const section of sections) {
    const element = document.getElementById(section.id)
    if (element) {
      const { offsetTop, offsetHeight } = element
      if (scrollPosition >= offsetTop && scrollPosition < offsetTop + offsetHeight) {
        activeSection.value = section.id
        break
      }
    }
  }
}

const scrollToSection = (sectionId) => {
  const element = document.getElementById(sectionId)
  if (element) {
    const offset = 100
    const elementPosition = element.offsetTop - offset
    window.scrollTo({ top: elementPosition, behavior: 'smooth' })
  }
}

onMounted(() => {
  window.addEventListener('scroll', onScroll, { passive: true })
  updateActiveSection()
})

onUnmounted(() => {
  window.removeEventListener('scroll', onScroll)
})
</script>

<style lang="scss" scoped>
// CodeArchivePage ìŠ¤íƒ€ì¼ ì¬ì‚¬ìš©
.gukjungpark-page {
  min-height: 100vh;
  background: var(--color-bg-secondary);
  padding-top: 80px;
}

.sticky-nav {
  position: fixed;
  top: 60px;
  left: 0;
  right: 0;
  background: var(--color-bg-primary);
  border-bottom: 1px solid var(--color-border);
  z-index: 100;
  transition: transform 0.3s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);

  &.hidden {
    transform: translateY(-100%);
  }
}

.nav-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
  display: flex;
  gap: 0.5rem;
  overflow-x: auto;

  &::-webkit-scrollbar {
    display: none;
  }
}

.nav-item {
  padding: 1rem 1.5rem;
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--color-text-secondary);
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
  flex-shrink: 0;

  &:hover {
    color: var(--color-text-primary);
  }

  &.active {
    color: var(--color-accent);
    border-bottom-color: var(--color-accent);
  }
}

.page-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
}

.content-section {
  margin-bottom: 4rem;
  scroll-margin-top: 150px;
}

.main-title {
  font-size: 3rem;
  font-weight: 800;
  color: var(--color-text-primary);
  margin-bottom: 0.5rem;

  @media (max-width: 768px) {
    font-size: 2rem;
  }
}

.subtitle {
  font-size: 1.25rem;
  color: var(--color-text-secondary);
  margin-bottom: 2rem;
}

h2 {
  font-size: 2rem;
  font-weight: 700;
  color: var(--color-text-primary);
  margin-bottom: 1.5rem;
  padding-bottom: 0.75rem;
  border-bottom: 2px solid var(--color-border);
}

h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin-bottom: 1rem;
}

.info-card {
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;

  p {
    color: var(--color-text-secondary);
    line-height: 1.8;
    margin: 0;
  }
}

.links-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.link-card {
  background: var(--color-bg-primary);
  border: 2px solid var(--color-border);
  border-radius: 12px;
  padding: 1.5rem;
  text-decoration: none;
  transition: all 0.3s;
  text-align: center;

  &:hover {
    border-color: var(--color-accent);
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  }
}

.link-icon {
  font-size: 2.5rem;
  margin-bottom: 0.75rem;
}

.link-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin-bottom: 0.5rem;
}

.link-url {
  font-size: 0.875rem;
  color: var(--color-accent);
  font-family: 'Courier New', monospace;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.feature-card {
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 1.5rem;
  transition: all 0.3s;

  &:hover {
    border-color: var(--color-accent);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  p {
    color: var(--color-text-secondary);
    line-height: 1.6;
    margin: 0;
  }
}

.feature-icon {
  font-size: 2rem;
  margin-bottom: 1rem;
}

.tech-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.tech-category {
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 1.5rem;

  h3 {
    margin-bottom: 1rem;
    color: var(--color-accent);
  }

  ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  li {
    padding: 0.5rem 0;
    color: var(--color-text-secondary);
    line-height: 1.6;

    strong {
      color: var(--color-text-primary);
    }
  }
}

.code-block {
  background: #1e1e1e;
  border-radius: 8px;
  padding: 1.5rem;
  margin: 1rem 0;
  overflow-x: auto;

  pre {
    margin: 0;

    code {
      font-family: 'Courier New', Consolas, monospace;
      font-size: 0.875rem;
      line-height: 1.6;
      color: #d4d4d4;
      white-space: pre;
    }
  }
}

.code-explanation {
  margin-bottom: 2.5rem;
}

.timeline {
  position: relative;
  padding-left: 3rem;

  &::before {
    content: '';
    position: absolute;
    left: 1rem;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--color-border);
  }
}

.timeline-item {
  position: relative;
  margin-bottom: 2rem;

  &:last-child {
    margin-bottom: 0;
  }
}

.timeline-marker {
  position: absolute;
  left: -2.5rem;
  top: 0;
  width: 2rem;
  height: 2rem;
  background: var(--color-accent);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.875rem;
  box-shadow: 0 0 0 4px var(--color-bg-secondary);
}

.timeline-content {
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 1.5rem;

  h3 {
    margin-top: 0;
  }

  ul {
    margin: 0;
    padding-left: 1.5rem;
  }

  li {
    color: var(--color-text-secondary);
    line-height: 1.8;
    margin-bottom: 0.5rem;
  }

  p {
    color: var(--color-text-secondary);
    margin-bottom: 1rem;
  }
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
}

.stat-card {
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 2rem;
  text-align: center;
  transition: all 0.3s;

  &:hover {
    border-color: var(--color-accent);
    transform: translateY(-4px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
}

.stat-number {
  font-size: 2.5rem;
  font-weight: 800;
  color: var(--color-accent);
  margin-bottom: 0.5rem;
}

.stat-label {
  color: var(--color-text-secondary);
  font-size: 0.9375rem;
}

.insights-list {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.insight-item {
  display: flex;
  gap: 1.5rem;
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 1.5rem;
  transition: all 0.3s;

  &:hover {
    border-color: var(--color-accent);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
}

.insight-icon {
  font-size: 2.5rem;
  flex-shrink: 0;
}

.insight-content {
  flex: 1;

  h3 {
    margin-top: 0;
    margin-bottom: 0.75rem;
  }

  p {
    color: var(--color-text-secondary);
    line-height: 1.8;
    margin: 0;
  }
}

@media (max-width: 768px) {
  .gukjungpark-page {
    padding-top: 60px;
  }

  .sticky-nav {
    top: 50px;
  }

  .page-content {
    padding: 1rem;
  }

  .timeline {
    padding-left: 2rem;

    &::before {
      left: 0.5rem;
    }
  }

  .timeline-marker {
    left: -1.75rem;
    width: 1.5rem;
    height: 1.5rem;
    font-size: 0.75rem;
  }
}
</style>
